{% extends 'layout.html' %}

{% block title %}Geological Unit Finder{% endblock %}

{% block content %}
    <div class="container mt-5">
        <h1 class="text-center mb-4">Interactive Map of the Neuquen Basin</h1>
        <div class="row">
            <!-- Mapa interactivo -->
            <div class="col-md-8">
                <div class="position-relative">
                    <!-- Imagen interactiva -->
                    <img src="https://www.researchgate.net/profile/Sergio-Voglino/publication/316994664/figure/fig1/AS:668917915725825@1536493867094/Figura-11-Limites-de-la-cuenca-Neuquina-linea-discontinua-blanca.png"
                        alt="Neuquen Basin Map" class="img-fluid">

                    <!-- Iconos interactivos -->
                    <div class="icon position-absolute" style="top: 70%; left: 32%;" onclick="togglePopup('popup1')">üìç</div>
                    <div class="icon position-absolute" style="top: 87%; left: 20%;" onclick="togglePopup('popup2')">üìç</div>
                    <div class="icon position-absolute" style="top: 75%; left: 29%;" onclick="togglePopup('popup3')">üìç</div>
                    <div class="icon position-absolute" style="top: 40%; left: 28%;" onclick="togglePopup('popup4')">üìç</div>
                    <div class="icon position-absolute" style="top: 48%; left: 38%;" onclick="togglePopup('popup5')">üìç</div>
                    <div class="icon position-absolute" style="top: 45%; left: 37%;" onclick="togglePopup('popup6')">üìç</div>
                    <div class="icon position-absolute" style="top: 63%; left: 60%;" onclick="togglePopup('popup7')">üìç</div>
                    <div class="icon position-absolute" style="top: 63%; left: 50%;" onclick="togglePopup('popup8')">üìç</div>
                    <div class="icon position-absolute" style="top: 72%; left: 50%;" onclick="togglePopup('popup9')">üìç</div>
                    <!-- Popups -->
                    <div id="popup1" class="popup position-absolute" style="top: 70%; left: 32%;">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">Basement</h5>
                                <p class="card-text">√ëireco and Lapa Fms.</p>
                                <img src="static/images/Lapa_√ëireco.jpg" alt="Basamento Lapa y √ëireco" class="img-fluid" style="max-width: 100%; height: auto;">
                            </div>
                        </div>
                    </div>
                    <div id="popup2" class="popup position-absolute" style="top: 87%; left: 20%;">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">Cambrian Basement</h5>
                                <p class="card-text">Colohuincul Complex</p>
                                <img src="static/images/colohuincul.jpg" alt="Basamento Colohuincul" class="img-fluid" style="max-width: 100%; height: auto;">

                            </div>
                        </div>
                    </div>
                    <div id="popup3" class="popup position-absolute" style="top: 75%; left: 29%;">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">Devonian Basement</h5>
                                <p class="card-text">Rahue Schists.</p>
                                <img src="static/images/rahue.jpg" alt="rahue" class="img-fluid" style="max-width: 100%; height: auto;">
                            </div>
                        </div>
                    </div>
                    <div id="popup4" class="popup position-absolute" style="top: 40%; left: 28%;">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">Cordillera del Viento Basemnet</h5>
                                <p class="card-text">Cordillera del Viento.</p>
                                <img src="static/images/CdV.jpg" alt="Cordillera del Viento" class="img-fluid" style="max-width: 100%; height: auto;">
                            </div>
                        </div>
                    </div>
                    <div id="popup5" class="popup position-absolute" style="top: 48%; left: 38%;">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">Tordillo and Vaca Muerta Fms.</h5>
                                <p class="card-text">Contact between Tordillo and Vaca Muerta Fms.</p>
                                <img src="static/images/Tord VM.jpg" alt="Tordillo Vaca Muerta" class="img-fluid" style="max-width: 100%; height: auto;">
                            </div>
                        </div>
                    </div>
                    <div id="popup6" class="popup position-absolute" style="top: 45%; left: 37%;">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">Ammonites</h5>
                                <p class="card-text">Typical Ammonites (marine fossils) from the Vaca Muerta Formation.</p>
                                <img src="static/images/Ammonites.jpg" alt="Ammonites Vaca Muerta" class="img-fluid" style="max-width: 100%; height: auto;">
                            </div>
                        </div>
                    </div>
                    <div id="popup7" class="popup position-absolute" style="top: 63%; left: 60%;">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">Neuqu√©n Group</h5>
                                <p class="card-text">Typical reddish and fluvial-eolics deposits from the Neuquen Group.</p>
                                <img src="static/images/Gpo. Neuquen.jpg" alt="Neuquen" class="img-fluid" style="max-width: 100%; height: auto;">
                            </div>
                        </div>
                    </div>
                    <div id="popup8" class="popup position-absolute" style="top: 63%; left: 50%;">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">Neuqu√©n Group (Barreales Lake)</h5>
                                <p class="card-text">Typical outcrops from the Neuquen Group.</p>
                                <img src="static/images/Gpo Neuquen (barreales).jpg" alt="barreales" class="img-fluid" style="max-width: 100%; height: auto;">
                            </div>
                        </div>
                    </div>
                    <div id="popup9" class="popup position-absolute" style="top: 72%; left: 50%;">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">Dinousaurs footprints</h5>
                                <p class="card-text">Typical dinosaurs footprints on units from The Neuqu√©n Group.</p>
                                <img src="static/images/Dino (Neuquen).jpg" alt="Prints" class="img-fluid" style="max-width: 100%; height: auto;">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Informaci√≥n adicional -->
            <div class="col-md-4">
                <div class="bg-light p-4 rounded shadow-sm">
                    <p></p>
                    <p>
                        Main outcrops of the Neuqu√©n Basin units. Click on each icon for more details.
                        Map base extracted from <a href="https://www.researchgate.net/publication/316994664_Caracterizacion_del_Miembro_Pilmatue_de_la_Formacion_Agrio_como_reservorio_no_convencional_de_tipo_shale">Voglino (2017)</a>
                    </p>
                    <p>
                        The best exposures of pre-Jurassic units are found in the sub-Andean region, specifically in the thrust and fold belt. The basement of the basin is formed by several metamorphic-igneous complexes; Colohuincul is the oldest (Cambrian), and is also present in the Northern Patagonian Massif, the Rahue Schists (Devonian) outcrop in the Southern Precordillera, the Andacollo Group (Carboniferous) in the Cordillera del Viento, and Choiyoi in multiple sectors in the sub-Andean region.
                    </p>
                    <p>
                        Jurassic units are present in numerous deposits, but mainly in the central-northern region. Very prominent are the outcrops of the Neuqu√©n Group to the east. These are gently dipping, in contrast to the subvertical and folded deformed sequences to the west.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS y dependencias -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>


    <script>
        // Funci√≥n para mostrar/ocultar los popups
        function togglePopup(popupId) {
            // Cerrar todos los popups
            var popups = document.querySelectorAll('.popup');
            popups.forEach(function(popup) {
                popup.classList.remove('show');
            });

            // Ahora abrir el popup correspondiente
            var popup = document.getElementById(popupId);
            popup.classList.add('show');
        }

        // Cerrar popups si se hace clic fuera de ellos
        window.onclick = function(event) {
            var popups = document.querySelectorAll('.popup');
            var iconos = document.querySelectorAll('.icon');
            var clickedInsidePopup = Array.from(popups).some(function(popup) {
                return popup.contains(event.target);
            });
            var clickedInsideIcon = Array.from(iconos).some(function(icon) {
                return icon.contains(event.target);
            });
            if (!clickedInsidePopup && !clickedInsideIcon) {
                popups.forEach(function(popup) {
                    popup.classList.remove('show');
                });
            }
        };
    </script>
{% endblock %}
